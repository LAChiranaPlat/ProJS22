<!DOCTYPE html>
<html>
<head>
	<title>DOM</title>
	<style type="text/css">
		ul{
		}
	</style>
</head>
<body>

	<h1>Bienvenido <span id="nUser">Usuario</span> a LAChirana Plat</h1>

	<fieldset>
		
		<legend>Publicación</legend>
		Fecha: <input type="date" id="fecha" />
		<br />
		<textarea id="content"></textarea>
		<br />
		Autor: <input type="text" id="autor" />
		<button id="btnSaludar">+ Publicar</button>

	</fieldset>


	<ul id="lista">
		
	</ul>

	<template id="plantillaItem">
		<li><img src="images/galery.jpg" width="100px" /><br />
			<code>[12/02/21]</code> <span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</span> <strong>Anonimo</strong></li>		
	</template>

	<script type="text/javascript" src="library.js"></script>
	<script type="text/javascript">

		const fragmento=document.createDocumentFragment()
		
		const template=obj("plantillaItem");

		const x=obj("nUser");
		x.innerText="Jorge"

		const lst=obj("lista")

		let n=0
		
		listener("btnSaludar","click",()=>{

			if(camposVacios())
				return

			
			image="img2"

			if(n%2==0){
				image="galery";
			}

			const clon=template.content.cloneNode(true)
			clon.querySelector("img").src="images/"+image+".jpg";
			clon.querySelector("code").textContent=obj("fecha").value;
			clon.querySelector("span").textContent=obj("content").value;
			clon.querySelector("strong").textContent=obj("autor").value;

			obj("fecha").value=""
			obj("content").value=""
			obj("autor").value=""

			fragmento.appendChild(clon)
			lst.appendChild(fragmento)

			n++

			/*
				modificar dinamicamente el DOM

				+AGREGAR
					1 TENER UN TEMPLATE
					2 TENER UN OBJETO DOCUMENTFRAGMENT
					3 CLONAR TEMPLATE
					4 MODIFICAR CLON
					5 INSERTAS EL CLON AL FRAGMENTO
					6 INSERTAS EL FRAGMENTO AL DOM

			*/

			//let user=prompt("Ingrese el nuevo Item")
			//lst.innerHTML = "<li>"+user+"</li>"
			/*

			'beforebegin': Antes que el propio elemento.
			'afterbegin': Justo dentro del elemento, antes de su primer elemento hijo.
			'beforeend': Justo dentro del elemento, después de su último elemento hijo.
			'afterend': Después del propio elemento
			*/
			
			/*
			lst.insertAdjacentHTML("afterend",'<li><img src="images/galery.jpg" width="100px" /><br />'+
			'<code>[12/02/21]</code> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod'+
			'tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,'+
			'quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo'+
			'consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse'+
			'cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non'+
			'proident, sunt in culpa qui officia deserunt mollit anim id est laborum. <strong>Anonimo</strong></li>')
			*/
		})

		function camposVacios(){
			if(obj("fecha").value=="" || obj("content").value=="" || obj("autor").value=="")
				return true
		}

	</script>
</body>
</html>


